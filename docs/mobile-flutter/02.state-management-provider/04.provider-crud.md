# CRUD dan Clean Code dengan Provider

---
  
## Pertanyaan Pemantik
Bayangkan aplikasi yang sudah memiliki:  
- banyak data  
- banyak halaman  
- banyak fitur

Menurut kalian:  
- apa yang terjadi jika semua logic ada di UI?  
- apakah mudah dikerjakan oleh banyak orang?

---

## Materi Inti

### 1. Prinsip Penting dalam Aplikasi Skala Kerja
Dalam aplikasi dunia kerja:  
- UI bertugas menampilkan data  
- UI menerima input dari user  
- Provider bertugas mengelola data dan aturan bisnis

Jika UI terlalu banyak logic:  
- kode sulit dibaca  
- bug sulit dicari  
- pengembangan jadi lambat

---

### 2. Perumpamaan UI dan Provider
Bayangkan restoran:  
- Pelayan = UI  
- Dapur = Provider

Jika pelayan ikut memasak di meja:  
- pelayanan menjadi kacau

---

## Tutorial Praktik (Langkah demi Langkah)

### Persiapan
Gunakan project:
smk_product_app

Pastikan sudah memiliki Task **model** dan **TaskProvider** dari pertemuan sebelumnya.

---

## 1. Menyempurnakan TaskProvider (CRUD Lengkap)
File: lib/providers/task_provider.dart

```dart
import 'package:flutter/material.dart';
import '../models/task.dart';

class TaskProvider extends ChangeNotifier {
  final List<Task> _tasks = [];

  List<Task> get tasks => _tasks;

  void addTask(String title) {
    _tasks.add(Task(title: title));
    notifyListeners();
  }

  void removeTask(int index) {
    _tasks.removeAt(index);
    notifyListeners();
  }

  void toggleTask(int index) {
    _tasks[index].isDone = !_tasks[index].isDone;
    notifyListeners();
  }

  void updateTask(int index, String newTitle) {
    _tasks[index].title = newTitle;
    notifyListeners();
  }
}
```

---

## 2. Menggunakan CRUD Lengkap di UI
Contoh potongan kode di TaskPage:

```dart
Checkbox(
  value: task.isDone,
  onChanged: (_) {
    taskProvider.toggleTask(index);
  },
)
```

```dart
IconButton(
  icon: const Icon(Icons.edit),
  onPressed: () {
    taskProvider.updateTask(index, 'Judul Baru');
  },
)
```

Catatan:  
- UI hanya memanggil method  
- Seluruh logic ada di Provider

---

## Checklist Keberhasilan
- CRUD lengkap berjalan  
- Tidak ada setState untuk data task  
- Provider menjadi pusat data  
- UI tetap sederhana

---

## Studi Kasus
Jika aplikasi ini nanti:  
- memakai API  
- dipakai banyak user  
- dikembangkan tim  

Diskusikan:  
- bagian mana yang paling aman sudah dipisahkan?  
- bagian mana yang akan berubah saat pakai API?

---

## Tugas

### Tugas Level Dasar
1. Tambahkan edit task menggunakan input user  
2. Tampilkan task selesai dengan style berbeda  
3. Logic tetap di Provider

---

### Tugas Level Industri
1. Buat widget terpisah untuk item task  
2. Widget hanya menerima data dan callback  
3. Tidak boleh ada logic CRUD di widget

---

## Refleksi
1. Apa perbedaan kode sebelum dan sesudah CRUD lengkap?  
2. Kenapa pemisahan logic penting untuk kerja tim?  
3. Bagian mana yang paling membantu pemahaman kalian?

---

## Penutup
Setelah pertemuan ini:  
- kalian siap mengelola data aplikasi nyata  
- project siap masuk ke API dan Firebase  

Pertemuan berikutnya akan membahas Provider untuk Form dan Validasi Input.
